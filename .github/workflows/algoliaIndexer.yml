name: Docker Image CI

on:
  push:

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
#     - uses: actions/checkout@v2
#     - name: Build the Docker image
#       run: docker build . --file Dockerfile --tag my-image-name:$(date +%s)
#     - uses: actions/checkout@v2
#     - uses: darrenjennings/algolia-docsearch-action@master
#       with:
#         algolia_application_id: 'RA3RRQUBO1'
#         algolia_api_key: '5fc4b9cbb86b1510fd966ce24afb13a4'
#         file: 'https://gist.github.com/devanshdixit/412b013be6eb6910f6563ad789366bfb'
    - uses: actions/checkout@v2

    - name: Get the content of algolia.json as config
      id: algolia_config
      run: echo "::set-output name=config::$(cat config.json | jq -r tostring)"

    - name: Push indices to Algolia
      uses: signcl/docsearch-scraper-action@master
      env:
       APPLICATION_ID: 'RA3RRQUBO1'
       API_KEY: '5fc4b9cbb86b1510fd966ce24afb13a4'
       CONFIG: https://gist.github.com/devanshdixit/412b013be6eb6910f6563ad789366bfb
